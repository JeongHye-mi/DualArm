For raspberryPI 3B

ubuntu mate 18.04 version img 파일이 microSD 카드에 제대로 write 되지 않아

ubuntu server를 이용

참고 사이트 : http://blog.naver.com/PostView.nhn?blogId=aul-_-&logNo=221462370568&parentCategoryNo=&categoryNo=&viewDate=&isShowPopularPosts=false&from=postView


win32diskimager 를 이용하여 microSD 카드에 img파일 write

rpi 부팅 한 후 대기 후 초기 아이디, 비밀번호 ubuntu / ubuntu 로 로그인  -> 필수적으로 비밀번호 변경

GUI 설치

rpi에 랜선을 이용하여 인터넷 연결 후 

$ sudo apt-get update && sudo apt-get upgrade   // 업데이트 및 업그레이드 진행

이 때, "could not get lock [/var/lib/apt/lists/lock-open](11:Resource temporarily unavailable" 과 같은 오류가 뜰 수 있다

apt-get 를 사용할 때 종종 발생할 수 있는 에러. ( /dpkg/lock 등 [] 안의 파일 이름은 다를 수 있음)

$ sudo rm /var/lib/apt/lists/* -vf   // 문제되는 파일 삭제
(참고사이트 : https://kkn1220.tistory.com/123 )

같은 오류가 뜨는 파일을 모두 지운 후 다시 업데이트 및 업그레이드 진행

중간에 나라 및 키보드 설정이 나오면 알맞게 설정

마친 후 

$ sudo apt-get install ubuntu-desktop  // ubuntu-desktop 설치
$ sudo apt-get install lxde  // lxde 설치

중간에 gdm3와 lightdm의 선택지가 나오면 lightdm 선택

$ sudo apt-get install lightdm   // lightdm 설치
$ sudo reboot   // 재부팅

그러면 익숙한 gui 의 login 창이 뜬다.

위에서 변경한 password로 login이 안될 경우

ctrl + alt + F1 을 이용하여 console 창에서 ubuntu 계정으로 로그인한다.

맞는 비밀번호를 사용해도 여러번 시도하여야 로그인 될 수 있다.

$ sudo chown ubuntu:ubuntu -R /home/ubuntu
$ sudo apt-get update
$ sudo reboot

이후에는 gui에서 로그인이 되었었다.
(참고사이트 1: https://askubuntu.com/questions/1059458/ubuntu-18-04-on-login-loop-even-with-correct-password
참고사이트 2: https://jangjy.tistory.com/260 )

이후 스왑 메모리 설정

(참고사이트 : https://yeopbox.com/%EC%9A%B0%EB%B6%84%ED%88%AC-%EB%A9%94%EC%9D%B4%ED%8A%B8-16-04-lts-%EC%8A%A4%EC%99%91swap-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0/ )

swap 파일을 만들어 자동으로 마운트 하게 설정하는 것이라고 함

$ sudo fallocate -l 2G /swapspace
$ sudo chmod 600 /swapspace
$ sudo mkswap /swapspace
$ sudo swapon /swapspace

스왑 파일을 재부팅 뒤에도 자동으로 마운트하도록 fstab 파일 수정

$ sudo nano /etc/fstab

맨 하단에 swap 파일 정보 입력

/swapspace  swap  swap  defaults  0 0
(간격은 tap 이용)

$ swapon -a   // fstab 에서 지정된 모든 swap 영역 활성화
$ free -m    // 적용된 것 확인


